
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
            <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
            
            <title>Test JSAPI</title>
            <style type="text/css">
                
                #main {
                }
            
            .singleLine, .half {
                height: 35px;
                margin-left: 6%;
                width: 80%;
                font-size: 12px;
            }
            
            .halfLeft {
                width: 28%;
            }
            
            .halfRight {
                width: 46%;
            }
            
            .singleLine {
                margin-top: 10px;
                width: 86%
            }
            
            .btn {
                margin-left: 6%;
                margin-top: 10px;
                width: 86%;
                font-size: 15px;
                height: 30px;
            }
            
            #content {
                margin-left: 6%;
                margin-top: 10px;
                width: 86%;
                font-size: 12px;
                color: #888888;
            }
            
            
                </style>
            </head>
    <body>
        <div id="main" width = "100%" height = "100%">
            
            <!--            <input id="apiName" class="singleLine" type="text" placeholder="API调用名，如remoteLog"  size="14" />-->
            <!--            <div id = "key_value">-->
            <!--                <p><input id = "key1" class="half halfLeft" type="text" placeholder="参数名"  size="14" /> :-->
            <!--                <input id= "value1" class="half halfRight" type="text" placeholder="参数值"  size="14" /></p>-->
            <!--                <p><input id = "key2" class="half halfLeft" type="text" placeholder="参数名"  size="14" /> :-->
            <!--                <input id= "value2" class="half halfRight" type="text" placeholder="参数值"  size="14" /></p>-->
            <!--                <p><input id = "key3" class="half halfLeft" type="text" placeholder="参数名"  size="14" /> :-->
            <!--                <input id= "value3" class="half halfRight" type="text" placeholder="参数值"  size="14" /></p>-->
            <!--            </div>-->
            <button class="btn" onclick= 'set_home_titleView()' />设置首页TitleView</button>
            <button class="btn" onclick= 'testLog()' />iOS端输出日志</button>
            <button class="btn" onclick= 'keyboard_cl()' />设置导航栏</button>
            <button class="btn" onclick= 'keyboard_clearcache()' />执行JSAPI-清除缓存</button>
            <button class="btn" onclick= 'keyboard_versioncheck()' />执行JSAPI-版本更新</button>
            <button class="btn" onclick= 'keyboard_heart()' />执行JSAPI-心跳</button>
            appid: <input value = "20200402" type="number" id="input001" />
            <button class="btn" onclick= 'startApp()' />打开appid</button>
            <button class="btn" onclick= 'rpc_jsapi_test()' />调用接口-心跳</button>
            <button class="btn" onclick= 'rpc_jsapi_test1()' />调用接口-修改预留信息</button>
            <button class="btn" onclick= 'rpc_jsapi_test2()' />调用接口-toNewCardActivityLogOut</button>
            
            <button class="btn" onclick= 'app_help()' />获取原生的值</button>
            <button class="btn" onclick= 'app_starturl()' />打开URL</button>
            
            <button class="btn" onclick= 'app_openLocalRUrl("./H52Native.html")' />打开本地URL</button>
            <button class="btn" onclick= 'app_openLocalRUrl("./H5JsApiHome.html")' />本地URL-导航栏测试</button>
            <button class="btn" onclick= 'app_openLocalRUrl("./ertan.html")' />本地URL-ertan</button>
            <p>-------------统一存储--------------</p>
            <button class="btn" onclick= 'app_storage_save()' />统一存储-保存数据</button>
            <button class="btn" onclick= 'app_storage_read()' />统一存储-查看数据</button>
            <button class="btn" onclick= 'app_storage_rm()' />统一存储-删除数据</button>
            <p>-------------HUD--------------</p>
            <button class="btn" onclick= 'app_hud_show()' />hud显示</button>
            <button class="btn" onclick= 'app_hud_hide()' />hud隐藏</button>
            <button class="btn" onclick= 'showAlert()' />显示弹窗</button>
            
            <button class="btn" onclick= 'makeCall()' />打电话</button>
            <button class="btn" onclick= 'cebpushwindow()' />pushwindow</button>
            <button class="btn" onclick= 'openAppId()' />打开离线包</button>
            
           <p>-------------加密--------------</p>
           <button class="btn" onclick= 'sm2()' />sm2</button>
                       
            <div>
                <div id="content">显示输出结果</div>
            </div>
            
            <div style="height:30px;"></div>
            
            <script type="text/javascript">
                
                function addKeyValue () {
                    var count = document.getElementsByClassName('half').length;
                    count /= 2;
                    count += 1;
                    var kv = document.getElementById('key_value');
                    kv.innerHTML += "<p><input id=\"key" +  count  + "\" class=\"half halfLeft\" type=\"text\" placeholder=\"参数名\"  size=\"14\" \/> : <input id=\"value" + count + "\"class=\"half halfRight\" type=\"text\" placeholder=\"参数值\"  size=\"14\" \/></p>";
                }
            <!--            alert(11)-->
            function execute () {
                var count = document.getElementsByClassName('half').length;
                count /= 2;
                
                var params = {};
                for (var i = 1; i <= count; i++) {
                    var key = document.getElementById('key'+i).value;
                    var value = document.getElementById('value'+i).value;
                    if (key.length > 0 && value.length > 0) {
                        if (!isNaN(value)) {
                            value = Number(value);
                        }
                        params[key] = value;
                    }
                };
                var alertParams = {
                  "title":"提示",
                  "message":"我是正文",
                  "negMsg":"确定",
                  "posMsg":"取消",
                  "negListener":"onNeg",
                  "posListener":"onPos"
                };
                
                var name = document.getElementById('apiName').value.trim();
                
                window.AlipayJSBridge && AlipayJSBridge.call(name, params, function(data) {
                                                             var s =  JSON.stringify(data, null, 4);
                                                             var content = document.getElementById('content');
                                                             content.innerHTML = "<div><pre>" + s + "</pre></div>";
                                                             });
            }
            function set_home_titleView(){
                window.AlipayJSBridge && AlipayJSBridge.call('keyboardApi', {'action':'open'}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             alert('s='+s)
                                                             });
            }
            function testLog() {
                AlipayJSBridge.call("logH5Console",{log:"info"});
            }
            function keyboard_cl(){
                window.AlipayJSBridge && AlipayJSBridge.call('keyboardApi', {'action':'close'}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             alert('s='+s)
                                                             });
            }
            function keyboard_clearcache(){
                
                window.AlipayJSBridge && AlipayJSBridge.call('clearCache', {'type':'0'}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             alert('s='+s)
                                                             });
            }
            function keyboard_versioncheck(){
                window.AlipayJSBridge && AlipayJSBridge.call('versionCheck', {}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             alert('s='+s)
                                                             });
            }
            
            function app_help(){
                window.AlipayJSBridge && AlipayJSBridge.call('bridgeParam', {}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             alert('bridgeParam='+s)
                                                             });
            }
            function appid_open(){
                window.AlipayJSBridge && AlipayJSBridge.call('bridgeParam', {}, function(data) {
                                                             var s =  JSON.stringify(data);
                                                             <!--                                                             alert('bridgeParam='+s)-->
                                                             appid = data.appId;
                                                             <!--                                                             alert('appid='+appid)-->
                                                             startApp(appid);
                                                             
                                                             });
            }
            
            function startApp(){
                // 获取输入框的值
                appid = "20190926"
                appid = document.getElementById('input001').value;
<!--                alert(appid)-->
                window.AlipayJSBridge && AlipayJSBridge.call("startApp", {'appId':appid}, function(data) {
                                                             alert('调用结果'+JSON.stringify(data));
                                                             });
            }
            
            function jsapi_call(apiName, params) {
                window.AlipayJSBridge && AlipayJSBridge.call(apiName, params, function(data) {
                                                             alert('调用结果'+JSON.stringify(data));
                                                             });
            }
            
            
            function rpc_jsapi_test() {
                window.AlipayJSBridge && AlipayJSBridge.call('rpc',{
                                                             operationType:'com.cmps.cebbank.keepAlive.do',
                                                             requestData:[{"_requestBody":{}}],
                                                             headers:{}
                                                             },
                                                             function(data) {alert('调用结果'+JSON.stringify(data));
                                                             });
                                                             
            }
            function rpc_jsapi_test1() {
                window.AlipayJSBridge && AlipayJSBridge.call('rpc',{
                                                             operationType:'com.cmps.cebbank.setPreMsg',
                                                             requestData:[{"preMsg":"131231321",
                                                             "ccuserId":"8c29a8dc-70df-48e8-a587-ec384441804f",
                                                             "LoginPhone":"15737648126",
                                                                          "cardNbr":"62342343285577"}],
                                                             headers:{}
                                                             },
                                                             function(data) {alert('调用结果'+JSON.stringify(data));
                                                             });
                                                             
            }
            function rpc_jsapi_test2() {
                window.AlipayJSBridge && AlipayJSBridge.call('rpc',{
                                                             operationType:'com.cmps.cebbank.toNewCardActivityLogOut',
                                                             requestData:[{}],
                                                             headers:{}
                                                             },
                                                             function(data) {alert('调用结果'+JSON.stringify(data));
                                                             });
                                                             
            }
            
<!--            [APCommonPreferences setString:@"654321" forKey:@"ccuserid" business:@""];-->
            function app_storage_save(){
                AlipayJSBridge.call('setAPDataStorage', {
                  type: "common",
                  business: "",
                  key: "ccuserid",
                  value: "123456"
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            }
            function app_storage_read(){
                AlipayJSBridge.call('getAPDataStorage', {
                  type: "common",
                  business: "",
                  key: "ccuserid",
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            }
            function app_storage_rm(){
                AlipayJSBridge.call('removeAPDataStorage', {
                  type: "common",
                  business: "",
                  key: "ccuserid",
                }, function(result) {
                  alert(JSON.stringify(result));
                });
            }
            
            
            
            
            function app_starturl(){
                
                AlipayJSBridge.call('pushWindow', {
                                    url: 'https://ceb-page.g-town.com.cn/elm/activity.html',
                                    param: {
                                    readTitle: true,
                                    showOptionMenu: false
                                    }
                                    });
            }
            function app_openLocalRUrl(url){
                if(url){
                    AlipayJSBridge.call('pushWindow', {
                                        url: url,
                                        param: {
                                        readTitle: true,
                                        showOptionMenu: false
                                        }
                                        });
                }else{
                    alert("URL为空");
                }
            }
            function app_hud_show(){
                    jsapi_call("showProDialog")

                    setTimeout(function(){app_hud_hide();},3000)
            }
            function app_hud_hide(){
                    jsapi_call("dismissProDialog")
            }
            function showAlert(){
                jsapi_call("showDialog",{
                  "title":"提示",
                  "message":"我是正文",
                  "negMsg":"取消",
                  "posMsg":"确定",
                  "negListener":"onNeg",
                  "posListener":"onPos"
                })
            }
            function sm2(){
                jsapi_call("getEncryptSm2",{
                  "originalPwd":"123456",
                  "publicKey":"0493182C89C55C675D4EEA7B27424C8DA60419833639628566B5BE0C7F12438B2945846B3CA8E1A90E68A794AC5A574490C0922F7A0F5A18F63288C75BFD6A7A64"
                })
            }
            
            function makeCall(){
                jsapi_call("makeCall",{
                  "phoneNbr":"123456",
                })
            }
            function cebpushwindow(){
                // 打开淘宝首页，自动读取 title，并且去除右边菜单按钮
                AlipayJSBridge.call('pushWindow', {
                  url: 'https://m.baidu.com/', // 要打开页面的 URL
                  // 打开页面的配置参数
                  param: {
                    readTitle: true,    //自动读取 title
                    showOptionMenu: false    // 隐藏右边菜单
                  },
                });
            }
            function openAppId(){
                AlipayJSBridge.call('startH5App', {
                                    appId: '20206020'
<!--                  url: '/www/index.html',-->
                });
            }
            
            document.addEventListener('keyboardText', function(data){
                                      <!--                                      alert("来自原生的字符串："+JSON.stringify(data))-->
                                      console.log('------');
                                      console.log(JSON.stringify(data));
                                      console.log('------');
                                      });
                                      
                                      
                                      
                </script>
            </body>
</html>

